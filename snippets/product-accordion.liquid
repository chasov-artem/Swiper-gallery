{% comment %}
  Dynamic Accordion from Product Metafields
  Metafields needed:
  - accordion_title_1, accordion_content_1
  - accordion_title_2, accordion_content_2  
  - accordion_title_3, accordion_content_3
  - accordion_multiple: true/false for multiple open items
{% endcomment %}

{% assign accordion_multiple = product.metafields.custom.accordion_multiple | default: false %}
{% assign has_accordion_content = false %}

{% for i in (1..3) %}
  {% assign title_key = 'accordion_title_' | append: i %}
  {% assign content_key = 'accordion_content_' | append: i %}
  {% assign title = product.metafields.custom[title_key] %}
  {% assign content = product.metafields.custom[content_key] %}
  
  {% if title != blank and content != blank %}
    {% assign has_accordion_content = true %}
  {% endif %}
{% endfor %}

{% if has_accordion_content %}
  <div class="product-accordion" data-multiple="{{ accordion_multiple }}">
    {% for i in (1..3) %}
      {% assign title_key = 'accordion_title_' | append: i %}
      {% assign content_key = 'accordion_content_' | append: i %}
      {% assign title = product.metafields.custom[title_key] %}
      {% assign content = product.metafields.custom[content_key] %}
      
      {% if title != blank and content != blank %}
        <div class="accordion-item">
          <button class="accordion-header" type="button">
            <span class="accordion-title">{{ title }}</span>
            <span class="accordion-icon">+</span>
          </button>
          <div class="accordion-content">
            <div class="accordion-body">
              {{ content }}
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
{% endif %} 